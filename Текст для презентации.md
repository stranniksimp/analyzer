### Описание кода:
Этот код представляет собой веб-приложение на **Flask**, которое позволяет пользователю ввести URL-адрес, а затем выполняет различные проверки и анализ для этого URL. Вот описание используемых модулей:

### Описание используемых модулей:
1. `flask` - основной модуль для создания веб-приложений на Flask.
2. `requests` - модуль для отправки HTTP-запросов и получения ответов.
3. `time` - модуль для работы со временем.
4. `ssl` - модуль для работы с SSL-сертификатами.
5. `socket` - модуль для работы с сокетами.
6. `OpenSSL` - модуль для работы с SSL-сертификатами, используя библиотеку OpenSSL.
7. `idna` - модуль для кодирования и декодирования Punycode.
8. `colorama` - модуль для вывода цветного текста в терминале.
9. `datetime` - модуль для работы с датами и временем.
10. `selenium` - модуль для автоматизации веб-браузера.
11. `re` - модуль для работы с регулярными выражениями.
![[Pasted image 20240525121219.png]]
### Описание функций:
1. **Обработка URL**
    - Функция `add_protocol(url)` проверяет, содержит ли переданный URL протокол (`http://` или `https://`). Если нет, то добавляет `https://` по умолчанию.
    - Также эта функция использует регулярное выражение для проверки валидности URL.
    ![[Pasted image 20240525121242.png]]
1. **Создание скриншота**
    - Функция `take_screenshot(url)` использует Selenium для автоматизации браузера Chrome в headless-режиме (без графического интерфейса).
    - Она открывает указанный URL в браузере и делает скриншот страницы, который кодируется в base64.
    - Скриншот возвращается в виде строки или `None` в случае ошибки.
![[Pasted image 20240525121351.png]]
1. **Проверка URL**
    - Функция `check_url(url)` выполняет несколько проверок для переданного URL:
        - Измеряет время загрузки страницы с помощью `requests.get(url)`.
        - Получает IP-адрес хоста и измеряет время пинга с помощью `ping(ip)`.
        - Измеряет время DNS-запроса с помощью `dns_lookup_time(url)`.
        - Получает и анализирует SSL-сертификат сайта с помощью `ssl` и `OpenSSL`.
        - Получает список IP-адресов для хоста с помощью `socket.gethostbyname_ex(url)`.
    - Результаты проверок возвращаются в виде строк для отображения на веб-странице.
![[Pasted image 20240525121431.png]]
![[Pasted image 20240525121511.png]]
1. **Веб-приложение Flask**
    - Функция `index()` обрабатывает GET и POST запросы.
    - При GET запросе просто отображается HTML-шаблон `index.html`.
    - При POST запросе:
        - Получает URL из формы.
        - Вызывает `add_protocol(url)` для обработки URL.
        - Вызывает `check_url(url)` для проверки URL.
        - Вызывает `take_screenshot(url)` для создания скриншота.
        - Передает результаты проверок и скриншот в HTML-шаблон `index.html` для отображения.
![[Pasted image 20240525121540.png]]

> Основная логика приложения находится в функции `index()`, которая обрабатывает GET и POST запросы. При POST запросе она получает URL из формы, выполняет необходимые проверки и отображает результаты на веб-странице.